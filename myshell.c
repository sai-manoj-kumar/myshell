/* 
 * File:   myshell.c
 * Author: saimanoj
 *
 * Created on 23 October, 2012, 11:20 AM
 */

#include"myshell.h"

void myshell_init() {

    // Get the UID of the current user.
    uid = getuid();
    // Get the passwd structure of the current user. 
    // passwd structure is defined in pwd.h, it is included in myshell.h
    current_user = getpwuid(uid);
    // Get the hostname of the computer

    len = 254;

    if (gethostname(host_name, len) == -1) {
        printf("error: myshell: gethostname: can't retrieve hostname\n");
    }

    // Get the username, home directory, details(name, etc.), 
    // default shell, and group id from the passwd structure.
    if (current_user == NULL) {
        printf("NULL\n");
        myshell_exit(1);
    }
    user_name = current_user->pw_name; // Username of the current user
    home_dir = current_user->pw_dir; // Home directory of the current user.
    details = current_user->pw_gecos; // Details of the current user.
    shell = current_user->pw_shell; // Details of the current user.
    gid = current_user->pw_gid; // group id of the current user.

    // Initially, set the current_path as home_dir of the user
    strncpy(current_path, "~", 2);


}

int myshell_exit(int status) {

    // TODO terminate all processes generated by myshell before exiting.
    if (killed_bg_ps) {
        printf("Killed Background Processes\n");
    }
    printf("Bye, have a nice day.\n");
    exit(status);
}




